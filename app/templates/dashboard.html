
{% extends "main.html" %}

{% block content %}



<section class="main-dash">

    <header class="msger-header">
        <div class="msger-header-title">
            <i class="fas fa-comment-alt"></i> CovertChat 

        </div>
        
    </header>
    <h2>{{session['user_name']}} {{session['user_id']}}</h2>

    <main class="inner-container">
        <aside class="active-chat-list">
            <ul>
                {% for person in chat_list %}

                {% if session['user_id'] ==  person.sender_obj.user_id %}
                    <li>{{person.receiver_obj.username}}</li>

                {% elif session['user_id'] ==  person.receiver_obj.user_id %}
                    <li>{{person.sender_obj.username}}</li>
                    {% endif%}
                    
                {% endfor %}
            </ul>

        </aside>

        <aside class="current-chat">
            {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}
                    <p> {{message}}</p>
                {% endfor %}
            {% endif %}
        {% endwith%}
            <form action="/create-message" class="msger-inputarea" method="post">
                <select name="receiver_person_id">
                    <option value="0">Choose an User</option>

                    {% for user in all_users%}
                    <option value="{{user.user_id}}">{{user.first_name}}</option>
                    {% endfor%}

                </select>
                <input type="text" class="msger-input" name="content" placeholder="Enter your message...">
                <button type="submit" class="msger-send-btn">Send</button>
            </form>
        
            
            <div class="logged-in-user">
                user 1 chat bubble                 
            </div>
            

            
            <div class="other-user">
                user 2 chat bubble
                
            </div>
            

        </aside>
    </main>


</section>

{% endblock %}